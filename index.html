<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Document Pro - Professional photo and document optimizer for passports, visas, and more. Easy, fast, and reliable.">
    <meta name="keywords" content="document optimizer, passport photo, visa photo, photo editing, professional documents">
    <meta name="author" content="Document Pro">
    <title>Document Pro - Professional Photo & Document Optimizer</title>
    <link rel="icon" type="image/png" href="favicon.png"> <!-- Replace with actual favicon -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Hero Section -->
        <section class="hero">
            <h1>Create Perfect Documents in Seconds</h1>
            <p>Optimize your photos and documents for passports, visas, and more with ease.</p>
            <button class="btn" onclick="scrollToSignIn()">Get Started Now</button>
        </section>
        
        <!-- Sign In Section -->
        <section class="header" id="signIn">
            <h2>üìÑ Document Pro</h2>
            <p>Sign in to optimize your professional photos and documents</p>
            
            <div id="signInSection" style="margin-top: 20px;">
                <!-- Google Sign In -->
                <div id="g_id_onload"
                     data-client_id="YOUR_GOOGLE_CLIENT_ID"
                     data-context="signin"
                     data-ux_mode="popup"
                     data-callback="handleSignIn"
                     data-auto_prompt="false">
                </div>
                <div class="g_id_signin"
                     data-type="standard"
                     data-shape="pill"
                     data-theme="outline"
                     data-text="signin_with"
                     data-size="large"
                     data-logo_alignment="left">
                </div>
                
                <!-- Email/Password Login -->
                <div class="login-form">
                    <input type="email" id="emailInput" placeholder="Email" required aria-label="Email">
                    <input type="password" id="passwordInput" placeholder="Password" required aria-label="Password">
                    <button class="btn" onclick="handleEmailSignIn()">Sign In with Email</button>
                </div>
            </div>
            
            <!-- User Info -->
            <div id="userInfo" style="display: none; margin-top: 20px;">
                <img id="userPhoto" style="width: 40px; height: 40px; border-radius: 50%; margin-right: 10px;" alt="User Profile">
                <span id="userName"></span>
                <button onclick="signOut()" style="margin-left: 15px; background: #667eea; color: white; padding: 5px 15px; border-radius: 15px; cursor: pointer;">Sign Out</button>
            </div>
            
            <!-- Usage Info -->
            <div id="usageInfo" style="display: none; margin-top: 15px; background: #f8f9ff; padding: 15px; border-radius: 10px;">
                <p id="usageText" style="margin: 0; font-size: 0.9rem;"></p>
            </div>
        </section>
        
        <!-- Main Card (Upload Section) -->
        <section class="main-card" id="mainCard" style="display: none;">
            <div class="upload-section">
                <div class="upload-zone" id="uploadZone">
                    <div class="upload-icon">üìÅ</div>
                    <h3>Drop your photo here or click to browse</h3>
                    <p>Supports JPG, PNG, PDF files up to 10MB</p>
                </div>
                <input type="file" id="fileInput" accept="image/*,.pdf" style="display: none;" aria-label="Upload file">
            </div>
            
            <div class="country-selection">
                <h3>Select Application Type:</h3>
                <select id="countrySelect" aria-label="Select application type">
                    <option value="">Choose application type...</option>
                    <option value="passport">Passport Photo (35x45mm)</option>
                    <option value="id">ID Card Photo (25x35mm)</option>
                    <option value="visa-us">US Visa (51x51mm - 2"x2")</option>
                    <option value="visa-uk">UK Visa (45x35mm)</option>
                    <option value="visa-canada">Canada Visa (35x45mm)</option>
                    <option value="visa-australia">Australia Visa (45x35mm)</option>
                    <option value="cv">CV/Resume Photo (40x50mm)</option>
                    <option value="linkedin">LinkedIn Profile (400x400px)</option>
                </select>
                
                <div class="specs-display" id="specsDisplay" style="display: none;">
                    <h4>Specifications:</h4>
                    <p id="specsText"></p>
                </div>
            </div>
            
            <div class="processing" id="processing">
                <h3>Processing your document...</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p>Optimizing image according to specifications</p>
            </div>
            
            <div class="preview-section" id="previewSection">
                <h3>Preview Result:</h3>
                <div class="preview-grid" id="previewGrid"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" id="downloadBtn">üì• Download Optimized File</button>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="processBtn" disabled>üöÄ Optimize Document</button>
            </div>
        </section>
        
        <!-- Customer Reviews Section -->
        <section class="reviews-section">
            <h2>What Our Users Say</h2>
            <p>Trusted by thousands for professional document optimization</p>
            <div class="reviews-grid">
                <div class="review-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p>"Document Pro made my visa application so easy! The photo was perfect, and the process took seconds."</p>
                    <p class="author">Sarah M., USA</p>
                </div>
                <div class="review-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p>"I needed a passport photo urgently, and Document Pro delivered instantly. Highly recommend!"</p>
                    <p class="author">James L., UK</p>
                </div>
                <div class="review-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                    <p>"Great tool for LinkedIn photos. The quality is professional, and the interface is user-friendly."</p>
                    <p class="author">Priya S., India</p>
                </div>
            </div>
        </section>
        
        <!-- Pricing Section -->
 section class="pricing-section">
            <h2>Choose Your Plan</h2>
            <p>Process more documents with our premium plans</p>
            
            <div class="pricing-grid">
                <div class="pricing-card">
                    <h3>Free</h3>
                    <div class="price">$0</div>
                    <ul class="features">
                        <li>1 document per day</li>
                        <li>Basic optimization</li>
                        <li>Standard formats</li>
                        <li>Email support</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('free')">Get Started</button>
                </div>
                
                <div class="pricing-card popular">
                    <div class="popular-badge">Most Popular</div>
                    <h3>Pro</h3>
                    <div class="price">$9.99<span style="font-size: 1rem;">/month</span></div>
                    <ul class="features">
                        <li>100 documents per month</li>
                        <li>Advanced optimization</li>
                        <li>All formats supported</li>
                        <li>Batch processing</li>
                        <li>Priority support</li>
                        <li>API access</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('pro')">Upgrade to Pro</button>
                </div>
                
                <div class="pricing-card">
                    <h3>Business</h3>
                    <div class="price">$29.99<span style="font-size: 1rem;">/month</span></div>
                    <ul class="features">
                        <li>Unlimited documents</li>
                        <li>Team collaboration</li>
                        <li>Custom branding</li>
                        <li>Advanced API</li>
                        <li>24/7 support</li>
                        <li>Custom integrations</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('business')">Contact Sales</button>
                </div>
            </div>
        </section>
        
        <!-- Limit Reached Modal -->
        <div class="modal" id="limitReachedModal">
            <div class="modal-overlay" onclick="closeLimitModal()"></div>
            <h2>üöÄ Upgrade to Continue</h2>
            <p>You've used your free document today! Upgrade to process more documents.</p>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
                <div class="pricing-card">
                    <h3>Pro</h3>
                    <div class="price">$9.99<span style="font-size: 1rem;">/month</span></div>
                    <ul class="features">
                        <li>100 documents/month</li>
                        <li>All formats</li>
                        <li>Batch processing</li>
                        <li>Priority support</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('pro')">Upgrade Now</button>
                </div>
                <div class="pricing-card">
                    <h3>Business</h3>
                    <div class="price">$29.99<span style="font-size: 1rem;">/month</span></div>
                    <ul class="features">
                        <li>Unlimited documents</li>
                        <li>Team features</li>
                        <li>API access</li>
                        <li>24/7 support</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('business')">Contact Sales</button>
                </div>
            </div>
            <button onclick="closeLimitModal()" style="margin-top: 20px; background: #ccc; color: #666; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Maybe Later</button>
        </div>
        
        <!-- Footer -->
        <footer class="footer">
            <div class="footer-grid">
                <div>
                    <h4>About Document Pro</h4>
                    <p>Document Pro helps you create professional photos and documents for official applications in seconds.</p>
                </div>
                <div>
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#signIn">Sign In</a></li>
                        <li><a href="/terms.html">Terms of Service</a></li>
                        <li><a href="/privacy.html">Privacy Policy</a></li>
                        <li><a href="/contact.html">Contact Us</a></li>
                    </ul>
                </div>
                <div>
                    <h4>Contact</h4>
                    <ul>
                        <li>Email: support@documentpro.com</li>
                        <li>Phone: +1-800-123-4567</li>
                        <li><a href="https://twitter.com/documentpro">Twitter</a></li>
                        <li><a href="https://facebook.com/documentpro">Facebook</a></li>
                    </ul>
                </div>
            </div>
            <p>&copy; 2025 Document Pro. All rights reserved.</p>
        </footer>
    </div>

    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
        // Country specifications
        const countrySpecs = {
            'passport': {
                name: 'Passport Photo',
                width: 35,
                height: 45,
                unit: 'mm',
                dpi: 600,
                background: 'white',
                format: 'JPG',
                maxSize: '500KB'
            },
            'id': {
                name: 'ID Card Photo',
                width: 25,
                height: 35,
                unit: 'mm',
                dpi: 300,
                background: 'white',
                format: 'JPG',
                maxSize: '300KB'
            },
            'visa-us': {
                name: 'US Visa Photo',
                width: 51,
                height: 51,
                unit: 'mm',
                dpi: 600,
                background: 'white',
                format: 'JPG',
                maxSize: '240KB'
            },
            'visa-uk': {
                name: 'UK Visa Photo',
                width: 45,
                height: 35,
                unit: 'mm',
                dpi: 600,
                background: 'neutral',
                format: 'JPG',
                maxSize: '500KB'
            },
            'visa-canada': {
                name: 'Canada Visa Photo',
                width: 35,
                height: 45,
                unit: 'mm',
                dpi: 600,
                background: 'white',
                format: 'JPG',
                maxSize: '500KB'
            },
            'visa-australia': {
                name: 'Australia Visa Photo',
                width: 45,
                height: 35,
                unit: 'mm',
                dpi: 600,
                background: 'light',
                format: 'JPG',
                maxSize: '500KB'
            },
            'cv': {
                name: 'CV/Resume Photo',
                width: 40,
                height: 50,
                unit: 'mm',
                dpi: 300,
                background: 'white',
                format: 'JPG',
                maxSize: '1MB'
            },
            'linkedin': {
                name: 'LinkedIn Profile Photo',
                width: 400,
                height: 400,
                unit: 'px',
                dpi: 72,
                background: 'any',
                format: 'JPG/PNG',
                maxSize: '2MB'
            }
        };

        // DOM elements
        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');
        const countrySelect = document.getElementById('countrySelect');
        const specsDisplay = document.getElementById('specsDisplay');
        const specsText = document.getElementById('specsText');
        const processBtn = document.getElementById('processBtn');
        const processing = document.getElementById('processing');
        const progressFill = document.getElementById('progressFill');
        const previewSection = document.getElementById('previewSection');
        const previewGrid = document.getElementById('previewGrid');
        const downloadBtn = document.getElementById('downloadBtn');

        let selectedFile = null;
        let processedFile = null;
        let currentPlan = 'free';
        let currentUser = null;
        let dailyUsage = 0;

        // Initialize Stripe
        const stripe = Stripe('pk_test_51234567890'); // Replace with your publishable key

        // Scroll to Sign In
        function scrollToSignIn() {
            document.getElementById('signIn').scrollIntoView({ behavior: 'smooth' });
        }

        // Google Sign In Handler
        function handleSignIn(response) {
            const responsePayload = decodeJWTResponse(response.credential);
            
            currentUser = {
                id: responsePayload.sub,
                name: responsePayload.name,
                email: responsePayload.email,
                picture: responsePayload.picture
            };
            
            updateAfterSignIn();
        }

        function decodeJWTResponse(token) {
            var base64Url = token.split('.')[1];
            var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            return JSON.parse(jsonPayload);
        }

        // Email/Password Sign In Handler
        function handleEmailSignIn() {
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;

            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }

            // Mock authentication (replace with real backend API call)
            if (email.includes('@') && password.length >= 6) {
                currentUser = {
                    id: email,
                    name: email.split('@')[0],
                    email: email,
                    picture: 'https://via.placeholder.com/40'
                };
                updateAfterSignIn();
            } else {
                alert('Invalid email or password (password must be at least 6 characters)');
            }
        }

        function updateAfterSignIn() {
            document.getElementById('signInSection').style.display = 'none';
            document.getElementById('userInfo').style.display = 'block';
            document.getElementById('userPhoto').src = currentUser.picture;
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('mainCard').style.display = 'block';
            loadUserUsage();
        }

        function signOut() {
            currentUser = null;
            dailyUsage = 0;
            document.getElementById('signInSection').style.display = 'block';
            document.getElementById('userInfo').style.display = 'none';
            document.getElementById('usageInfo').style.display = 'none';
            document.getElementById('mainCard').style.display = 'none';
            
            uploadZone.innerHTML = `
                <div class="upload-icon">üìÅ</div>
                <h3>Drop your photo here or click to browse</h3>
                <p>Supports JPG, PNG, PDF files up to 10MB</p>
            `;
            selectedFile = null;
            processedFile = null;
            previewSection.style.display = 'none';
        }

        function loadUserUsage() {
            const today = new Date().toDateString();
            const savedUsage = JSON.parse(localStorage.getItem(`usage_${currentUser.id}`) || '{}');
            
            if (savedUsage.date === today) {
                dailyUsage = savedUsage.count || 0;
            } else {
                dailyUsage = 0;
            }
            
            updateUsageDisplay();
        }

        function updateUsageDisplay() {
            const usageInfo = document.getElementById('usageInfo');
            const usageText = document.getElementById('usageText');
            
            if (currentPlan === 'free') {
                const remaining = 1 - dailyUsage;
                usageText.textContent = `Free Plan: ${remaining} document remaining today`;
                usageInfo.style.display = 'block';
                
                if (remaining <= 0) {
                    usageText.textContent = 'Free limit reached today. Upgrade to continue!';
                    usageInfo.style.background = 'rgba(255,0,0,0.1)';
                }
            } else {
                usageInfo.style.display = 'none';
            }
        }

        function saveUserUsage() {
            const today = new Date().toDateString();
            const usageData = {
                date: today,
                count: dailyUsage
            };
            localStorage.setItem(`usage_${currentUser.id}`, JSON.stringify(usageData));
        }

        function checkUsageLimit() {
            if (currentPlan === 'free' && dailyUsage >= 1) {
                document.getElementById('limitReachedModal').style.display = 'block';
                return false;
            }
            return true;
        }

        function closeLimitModal() {
            document.getElementById('limitReachedModal').style.display = 'none';
        }

        // Event listeners
        uploadZone.addEventListener('click', () => fileInput.click());
        uploadZone.addEventListener('dragover', handleDragOver);
        uploadZone.addEventListener('drop', handleDrop);
        uploadZone.addEventListener('dragleave', handleDragLeave);
        fileInput.addEventListener('change', handleFileSelect);
        countrySelect.addEventListener('change', handleCountryChange);
        processBtn.addEventListener('click', processFile);
        downloadBtn.addEventListener('click', downloadFile);

        function handleDragOver(e) {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            handleFile(file);
        }

        function handleFileSelect(e) {
            const file = e.target.files[0];
            handleFile(file);
        }

        function handleFile(file) {
            if (file && (file.type.startsWith('image/') || file.type === 'application/pdf')) {
                selectedFile = file;
                uploadZone.innerHTML = `
                    <div class="upload-icon">‚úÖ</div>
                    <h3>1 file selected</h3>
                    <p>${file.name}</p>
                `;
                updateProcessButton();
            } else {
                alert('Please select a valid JPG, PNG, or PDF file.');
            }
        }

        function handleCountryChange() {
            const selectedCountry = countrySelect.value;
            if (selectedCountry && countrySpecs[selectedCountry]) {
                const specs = countrySpecs[selectedCountry];
                specsDisplay.style.display = 'block';
                specsText.innerHTML = `
                    <strong>${specs.name}</strong><br>
                    Size: ${specs.width} √ó ${specs.height} ${specs.unit}<br>
                    Resolution: ${specs.dpi} DPI<br>
                    Background: ${specs.background}<br>
                    Format: ${specs.format}<br>
                    Max file size: ${specs.maxSize}
                `;
            } else {
                specsDisplay.style.display = 'none';
            }
            updateProcessButton();
        }

        function updateProcessButton() {
            processBtn.disabled = !(selectedFile && countrySelect.value);
        }

        async function processFile() {
            if (!selectedFile || !countrySelect.value) return;
            
            if (!currentUser) {
                alert('Please sign in to process documents');
                return;
            }
            
            if (!checkUsageLimit()) {
                return;
            }

            processing.style.display = 'block';
            processBtn.disabled = true;
            
            const specs = countrySpecs[countrySelect.value];
            progressFill.classList.add("active");
            
            progressFill.style.width = '100%';
            
            processedFile = await processImage(selectedFile, specs);
            
            processing.style.display = 'none';
            progressFill.classList.remove("active");
            
            dailyUsage += 1;
            saveUserUsage();
            updateUsageDisplay();
            
            showPreview();
        }

        async function processImage(file, specs) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = function() {
                    const pixelWidth = specs.unit === 'mm' ? 
                        (specs.width * specs.dpi) / 25.4 : specs.width;
                    const pixelHeight = specs.unit === 'mm' ? 
                        (specs.height * specs.dpi) / 25.4 : specs.height;
                    
                    canvas.width = pixelWidth;
                    canvas.height = pixelHeight;
                    
                    if (specs.background === 'white') {
                        ctx.fillStyle = '#FFFFFF';
                    } else if (specs.background === 'neutral') {
                        ctx.fillStyle = '#F0F0F0';
                    } else if (specs.background === 'light') {
                        ctx.fillStyle = '#F8F8F8';
                    }
                    
                    if (specs.background !== 'any') {
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                    }
                    
                    const scale = Math.max(
                        canvas.width / img.width,
                        canvas.height / img.height
                    );
                    
                    const scaledWidth = img.width * scale;
                    const scaledHeight = img.height * scale;
                    const x = (canvas.width - scaledWidth) / 2;
                    const y = (canvas.height - scaledHeight) / 2;
                    
                    ctx.drawImage(img, x, y, scaledWidth, scaledHeight);
                    
                    canvas.toBlob((blob) => {
                        resolve({
                            name: file.name.replace(/\.[^/.]+$/, '_optimized.jpg'),
                            blob: blob,
                            url: URL.createObjectURL(blob),
                            originalName: file.name
                        });
                    }, 'image/jpeg', 0.9);
                };
                
                img.src = URL.createObjectURL(file);
            });
        }

        function showPreview() {
            previewGrid.innerHTML = '';
            
            const previewCard = document.createElement('div');
            previewCard.className = 'preview-card';
            previewCard.innerHTML = `
                <h4>Before</h4>
                <img src="${URL.createObjectURL(selectedFile)}" alt="Original">
                <h4 style="margin-top: 20px;">After</h4>
                <img src="${processedFile.url}" alt="Optimized">
                <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                    ${processedFile.name}
                </p>
            `;
            previewGrid.appendChild(previewCard);
            
            previewSection.style.display = 'block';
            processBtn.disabled = false;
        }

        function downloadFile() {
            const a = document.createElement('a');
            a.href = processedFile.url;
            a.download = processedFile.name;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function selectPlan(plan) {
            if (plan === 'free') {
                alert('You are now using the free plan! Process 1 document per day.');
                return;
            }
            
            if (plan === 'business') {
                alert('Please contact sales@documentpro.com for business inquiries.');
                return;
            }
            
            if (plan === 'pro') {
                if (!currentUser) {
                    alert('Please sign in first to upgrade your plan.');
                    return;
                }
                
                const priceId = 'price_1234567890'; // Replace with your price ID
                
                stripe.redirectToCheckout({
                    lineItems: [{
                        price: priceId,
                        quantity: 1,
                    }],
                    mode: 'subscription',
                    customerEmail: currentUser.email,
                    successUrl: window.location.origin + '/success.html',
                    cancelUrl: window.location.origin + '/cancel.html',
                }).then(function (result) {
                    if (result.error) {
                        alert('Payment failed: ' + result.error.message);
                    }
                });
            }
        }

        window.addEventListener('load', function() {
            console.log('Document Pro initialized successfully!');
        });
    </script>
</body>
</html>